{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>MountTrack Login</title>
{% endblock meta %}

{% block content %}
<div class="relative flex flex-col md:flex-row min-h-screen overflow-hidden">

  <!-- background image -->
  <img 
    src="{% static 'image/login-background.jpg' %}" 
    alt="Login Background" 
    class="absolute inset-0 w-full h-full object-cover"
  >

  <!-- overlay warna bone -->
  <div class="absolute inset-0 bg-[#E5D7C4]/60"></div>

  <!-- sebelah kiri, tempat logo -->
  <div class="hidden md:flex relative w-1/3 items-center justify-center bg-[#354024]/75 z-10 p-6">
    <img 
      src="{% static 'image/logo.jpg' %}" 
      alt="MountTrack Logo"
      class="w-48 h-auto object-contain rounded-lg border border-[#CFBB99] shadow-sm"
    >
  </div>

  <!-- sebelah kanan, form login -->
  <div class="relative w-full md:w-2/3 flex items-center justify-center p-6 md:p-8 z-10">
    <div class="bg-[#E5D7C4]/85 rounded-xl border border-[#CFBB99] p-8 w-full max-w-md">

      <div class="text-center mb-8">
        <h1 class="text-2xl font-bold text-[#354024] mb-2">Selamat datang kembali!</h1>
        <p class="text-[#4C3D19] text-sm">Yuk, login untuk melanjutkan kisah pendakianmu!</p>
      </div>

      <!-- error -->
      {% if form.non_field_errors %}
        <div class="mb-6">
          {% for error in form.non_field_errors %}
            <div class="px-4 py-3 rounded-md text-sm border bg-red-50 border-red-200 text-red-700">
              {{ error }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- form -->
      <form method="POST" class="space-y-6">
        {% csrf_token %}
        <div>
          <label for="username" class="block text-sm font-medium text-[#354024] mb-2">Username</label>
          <input
            id="username"
            name="username"
            type="text"
            required
            class="w-full px-4 py-3 border border-[#889063] rounded-md focus:outline-none focus:ring-2 focus:ring-[#354024] bg-white text-[#354024]"
            placeholder="Masukkan username Anda">
        </div>

        <div>
          <label for="password" class="block text-sm font-medium text-[#354024] mb-2">Password</label>
          <input
            id="password"
            name="password"
            type="password"
            required
            class="w-full px-4 py-3 border border-[#889063] rounded-md focus:outline-none focus:ring-2 focus:ring-[#354024] bg-white text-[#354024]"
            placeholder="Masukkan password Anda">
        </div>

        <button
          type="submit"
          class="w-full bg-[#354024] text-[#E5D7C4] font-semibold py-3 px-4 rounded-md hover:bg-[#4C3D19] transition-colors">
          Login
        </button>
      </form>

      <!-- messages -->
      {% if messages %}
        <div class="mt-6">
          {% for message in messages %}
            <div
              class="px-4 py-3 rounded-md text-sm border mb-2
              {% if message.tags == 'success' %}
                bg-[#889063]/10 border-[#889063] text-[#354024]
              {% elif message.tags == 'error' %}
                bg-red-50 border-red-200 text-red-700
              {% else %}
                bg-[#CFBB99]/10 border-[#CFBB99] text-[#354024]
              {% endif %}
              ">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- link daftar -->
      <div class="mt-6 text-center pt-6 border-t border-[#CFBB99]">
        <p class="text-[#4C3D19] text-sm">
          Belum punya akun?
          <a href="{% url 'userprofile:register' %}" class="text-[#354024] font-semibold hover:text-[#889063] transition-colors">
            Daftar Sekarang
          </a>
        </p>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
