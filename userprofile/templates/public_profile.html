{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Profil {{ target_user.username }} - MountTrack</title>
{% endblock meta %}

{% block content %}
<div class="min-h-screen bg-[#E5D7C4] flex items-center justify-center py-10 px-6">
  <div class="bg-[#CFBB99] border border-[#CFBB99] rounded-2xl shadow-sm p-10 w-full max-w-5xl">
    <div class="text-center mb-10">
      <h1 class="text-3xl font-bold text-[#354024] mb-1">
        Profil {{ target_user.username }}
      </h1>
    </div>

    <!-- grid untuk info dan riwayat -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">

      <!-- kolom kiri: informasi umum -->
      <div>
        <!-- nama lengkap -->
        {% if user.is_authenticated and target_user.nama %}
        <div class="mb-8">
          <h2 class="text-lg font-semibold text-[#354024] mb-3 border-b border-[#889063] pb-1">
            Nama Lengkap
          </h2>
          <p class="text-[#4C3D19]">{{ target_user.nama }}</p>
        </div>
        {% elif not user.is_authenticated and target_user.nama %}
        <div class="mb-8">
          <h2 class="text-lg font-semibold text-[#354024] mb-3 border-b border-[#889063] pb-1">
            Nama Lengkap
          </h2>
          <p class="italic text-[#4C3D19]/70">Hanya dapat dilihat setelah login</p>
        </div>
        {% endif %}

        <!-- kontak -->
        <div class="mb-8">
          <h2 class="text-lg font-semibold text-[#354024] mb-3 border-b border-[#889063] pb-1">
            Kontak
          </h2>
          <ul class="text-[#4C3D19] space-y-2">
            {% if target_user.email %}
            <li>
              <span class="font-semibold text-[#354024]">Email:</span> {{ target_user.email }}
            </li>
            {% endif %}
            
            {% if user.is_authenticated and target_user.nomor_telepon %}
            <li>
              <span class="font-semibold text-[#354024]">Nomor Telepon:</span> {{ target_user.nomor_telepon }}
            </li>
            {% elif not user.is_authenticated and target_user.nomor_telepon %}
            <li>
              <span class="font-semibold text-[#354024]">Nomor Telepon:</span>
              <span class="italic text-[#4C3D19]/70">Hanya dapat dilihat setelah login</span>
            </li>
            {% endif %}
          </ul>
        </div>

        <!-- tingkat pengalaman -->
        <div class="mb-8">
          <h2 class="text-lg font-semibold text-[#354024] mb-3 border-b border-[#889063] pb-1">
            Tingkat Pengalaman
          </h2>
          <p class="text-[#4C3D19] capitalize">
            {% if target_user.category_experience == 'beginner' %}
              <span class="font-semibold text-[#354024]">Beginner</span> (Pemula)
            {% elif target_user.category_experience == 'intermediate' %}
              <span class="font-semibold text-[#354024]">Intermediate</span> (Menengah)
            {% elif target_user.category_experience == 'advanced' %}
              <span class="font-semibold text-[#354024]">Advanced</span> (Berpengalaman)
            {% else %}
              <span class="font-semibold text-[#354024]">Belum Ditentukan</span>
            {% endif %}
          </p>
        </div>

        <!-- informasi pribadi -->
        <div>
          <h2 class="text-lg font-semibold text-[#354024] mb-3 border-b border-[#889063] pb-1">
            Informasi Pribadi
          </h2>
          <ul class="text-[#4C3D19] space-y-2">
            {% if target_user.umur %}
            <li>
              <span class="font-semibold text-[#354024]">Umur:</span> {{ target_user.umur }} tahun
            </li>
            {% endif %}
            {% if target_user.jenis_kelamin %}
            <li>
              <span class="font-semibold text-[#354024]">Jenis Kelamin:</span>
              {% if target_user.jenis_kelamin == 'M' %}
                Laki-laki
              {% elif target_user.jenis_kelamin == 'F' %}
                Perempuan
              {% else %}
                Lainnya
              {% endif %}
            </li>
            {% endif %}
          </ul>
        </div>
      </div>

      <!-- kolom kanan: riwayat pendakian -->
      <div class="pt-0">
        <h2 class="text-lg font-semibold text-[#354024] mb-3 border-b border-[#889063] pb-1">
          Riwayat Pendakian
        </h2>
        {% if target_user.history_gunung.all %}
          {% if target_user.history_gunung.count > 0 %}
            <ul class="list-disc list-inside bg-[#F8F4EF] border border-[#889063] rounded-md px-4 py-3 text-[#354024]">
              {% for mountain in target_user.history_gunung.all %}
                <li>{{ mountain.name }}</li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="bg-[#F8F4EF] border border-[#889063] rounded-md px-4 py-3 text-[#4C3D19] italic">
              Belum ada riwayat pendakian.
            </p>
          {% endif %}
        {% else %}
          <p class="bg-[#F8F4EF] border border-[#889063] rounded-md px-4 py-3 text-[#4C3D19] italic">
            Belum ada riwayat pendakian.
          </p>
        {% endif %}
      </div>

    </div>
  </div>
</div>
{% endblock content %}
